<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <base target="_top">
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #0d1a26;
      margin: 0;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
    }

    .card, .info-card {
      background-color: #fff;
      border-radius: 12px;
      box-shadow: 0 0 15px rgba(0,0,0,0.1);
      padding: 20px 25px;
      width: 100%;
      max-width: 420px;
      margin-bottom: 20px;
      animation: fadeIn 0.5s ease;
    }

    .card {
      display: none;
    }

    #landingPage {
      text-align: center;
      color: #fff;
      margin-bottom: 30px;
    }

    #landingPage h2 {
      font-size: 1.8em;
    }

    #landingPage p {
      font-size: 1.1em;
    }

    button {
      background-color: #e84545;
      border: none;
      border-radius: 8px;
      padding: 12px 24px;
      color: white;
      font-weight: bold;
      font-size: 16px;
      cursor: pointer;
      width: 100%;
    }

    button:hover {
      background-color: #cc3c3c;
    }

    label {
      display: block;
      margin: 10px 0 4px;
      font-weight: 600;
      font-size: 0.85em;
    }

    input, select, textarea {
      width: 100%;
      padding: 10px 12px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 14px;
      margin-bottom: 15px;
      box-sizing: border-box;
    }

    .price-summary {
      background-color: #0d1a26;
      color: #fff;
      border-radius: 10px;
      padding: 16px;
      text-align: center;
      font-weight: bold;
      font-size: 18px;
    }

    .price-summary span {
      display: block;
      font-size: 24px;
      margin-top: 5px;
    }

    .perk-list {
      margin: 15px 0 10px;
      padding-left: 20px;
    }

    .perk-list li {
      margin-bottom: 8px;
    }

    #qtyRow {
      display: none;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>

  <!-- Landing Page -->
  <div id="landingPage">
    <h2>üëã Welcome to MV Digital Tools</h2>
    <p>Are you ready to save up to 90% on subscription services? üöÄ</p>
    <button onclick="startForm()">Yes, show me how</button>
  </div>

  <!-- Info Section -->
  <div class="info-card" id="infoCard" style="display: none;">
    <h3>Here's how it works:</h3>
    <ul style="list-style: none; padding: 0; font-size: 0.95em;">
      <li>üìù Fill out the form <strong>~ 2 minutes</strong></li>
      <li>üì© Instant payment instructions via email</li>
      <li>‚úÖ Activation within <strong>15 mins</strong> (same day)</li>
      <li>üìû Need help? <strong style="color:#e84545;">Call 7566658</strong></li>
    </ul>
  </div>

  <!-- Subscription Form -->
  <div class="card" id="formCard">
    <h2>üìù Subscription Request</h2>
    <p>Fill the form to subscribe. You'll receive payment instructions via email.</p>

    <form id="customerForm">
      <label>üë§ Full Name</label>
      <input type="text" name="name" required>

      <label>üìû Contact Number</label>
      <input type="tel" name="contact" required>

      <label>üìß Email Address</label>
      <input type="email" name="email" required>

      <label>üõ†Ô∏è Request Type</label>
      <select name="requestType" required>
        <option value="new">New Subscription</option>
        <option value="renew">Renew Existing</option>
      </select>

      <label>üß© Service</label>
      <select name="service" id="service" required>
        <option value="ChatGPT">ChatGPT Pro</option>
        <option value="Microsoft 365">Microsoft 365</option>
        <option value="Canva Pro">Canva Pro</option>
        <option value="Duolingo">Duolingo</option>
        <option value="Assignment Check">Assignment Check</option>
        <option value="Perplexity">Perplexity Pro</option>
        <option value="Amazon Prime Video">Amazon Prime Video</option>
        <option value="Adobe Creative Cloud">Adobe Creative Cloud</option>
      </select>

      <label>‚è≥ Duration</label>
      <select name="duration" id="duration" required></select>

      <div id="qtyRow">
        <label>üìù No. of Assignments</label>
        <input type="number" id="qty" name="qty" min="1" />
      </div>

      <div class="price-summary" id="priceDisplay">
        üõí Total Price
        <span>MVR 0 ($0.00)</span>
      </div>

      <label>üóíÔ∏è Notes / Ref</label>
      <textarea name="notes" rows="3" placeholder="Optional..."></textarea>

      <button type="submit">Submit</button>
    </form>
  </div>

  <script>
    function startForm() {
      document.getElementById('landingPage').style.display = 'none';
      document.getElementById('infoCard').style.display = 'block';
      document.getElementById('formCard').style.display = 'block';
    }

    const priceMap = {
      "ChatGPT": { "1 Month": 100, "6 Months": 600, "1 Year": 1200 },
      "Microsoft 365": { "1 Year": 500 },
      "Canva Pro": { "1 Year": 150 },
      "Duolingo": { "1 Year": 150 },
      "Assignment Check": {
        "Basic AI Detection": 50,
        "AI Bypass": 100,
        "AI Bypass Plus": 300
      },
      "Perplexity": { "1 Year": 200 },
      "Amazon Prime Video": { "1 Year": 999 },
      "Adobe Creative Cloud": { "1 Month": 450 }
    };

    const durationOptions = {
      "ChatGPT": ["1 Month", "6 Months", "1 Year"],
      "Microsoft 365": ["1 Year"],
      "Canva Pro": ["1 Year"],
      "Duolingo": ["1 Year"],
      "Assignment Check": ["Basic AI Detection", "AI Bypass", "AI Bypass Plus"],
      "Perplexity": ["1 Year"],
      "Amazon Prime Video": ["1 Year"],
      "Adobe Creative Cloud": ["1 Month"]
    };

    const perksMap = {
      "ChatGPT Pro": [
        "Priority access to GPT-4",
        "Faster response times",
        "Improved performance during peak hours"
      ],
      "Microsoft 365": [
        "Full access to Word, Excel, PowerPoint",
        "1TB OneDrive cloud storage",
        "Outlook email & calendar",
        "Install on up to 5 devices"
      ],
      "Canva Pro": [
        "Unlimited premium templates & elements",
        "Magic Resize and Background Remover",
        "Brand Kit and content planner",
        "Team collaboration features"
      ],
      "Duolingo": [
        "No ads",
        "Unlimited hearts (mistakes)",
        "Personalized practice",
        "Mastery quizzes and offline access"
      ],
      "Adobe Creative Cloud": [
        "Photoshop, Illustrator, Premiere Pro & more",
        "100GB cloud storage",
        "Fonts, stock assets, and portfolio tools",
        "Cross-device app sync"
      ],
      "Amazon Prime Video": [
        "Unlimited streaming of movies and series",
        "Exclusive Prime Originals",
        "Watch on multiple devices",
        "Offline downloads"
      ],
      "Perplexity Pro": [
        "Faster and more accurate answers",
        "Expanded answer formatting",
        "Sources and citations in context",
        "No daily usage limits"
      ],
      "Assignment Check": {
        "Basic AI Detection": ["Basic detection on all major AI Detectors including Turnitin + MVR 15 per extra run"],
        "AI Bypass": ["Changes for 0% detection + MVR 25 per correction/run"],
        "AI Bypass Plus": ["All features + unlimited submissions"]
      }
    };

    const serviceEl = document.getElementById('service');
    const durationEl = document.getElementById('duration');
    const qtyRow = document.getElementById('qtyRow');
    const qtyInput = document.getElementById('qty');
    const priceDisplay = document.getElementById('priceDisplay').querySelector('span');

    function updateDurationOptions() {
      const service = serviceEl.value;
      const durations = durationOptions[service] || [];
      durationEl.innerHTML = "";
      durations.forEach(d => {
        const opt = document.createElement("option");
        opt.value = d;
        opt.textContent = d;
        durationEl.appendChild(opt);
      });
      updatePrice();
      updatePerks();
      handleQtyVisibility();
    }

    function updatePerks() {
      const service = serviceEl.value;
      const duration = durationEl.value;
      let displayPerks = [];
      if (service === "Assignment Check") {
        displayPerks = perksMap["Assignment Check"]?.[duration] || [];
      } else {
        const key = service === "ChatGPT" ? "ChatGPT Pro" :
                    service === "Perplexity" ? "Perplexity Pro" : service;
        displayPerks = perksMap[key] || [];
      }

      let perkDiv = document.getElementById('perkDisplay');
      if (!perkDiv) {
        perkDiv = document.createElement("div");
        perkDiv.id = "perkDisplay";
        durationEl.insertAdjacentElement("afterend", perkDiv);
      }
      perkDiv.innerHTML = displayPerks.length > 0 ? `
        <label><strong>üéÅ What do you get:</strong></label>
        <ul class="perk-list">${displayPerks.map(p => `<li>‚Ä¢ ${p}</li>`).join("")}</ul>
      ` : "";
    }

    function updatePrice() {
      const service = serviceEl.value;
      const duration = durationEl.value;
      let price = 0;

      if (service === "Assignment Check") {
        const qty = parseInt(qtyInput.value || "1");
        if (duration === "Basic AI Detection") price = 50 + (qty - 1) * 15;
        else if (duration === "AI Bypass") price = 100 + (qty - 1) * 25;
        else price = 300;
      } else {
        price = priceMap[service]?.[duration] || 0;
      }

      const usd = (price / 15.42).toFixed(2);
      priceDisplay.textContent = `MVR ${price} ($${usd})`;
    }

    function handleQtyVisibility() {
      const service = serviceEl.value;
      const duration = durationEl.value;
      qtyRow.style.display = (service === "Assignment Check" && duration !== "AI Bypass Plus") ? "block" : "none";
    }

    serviceEl.onchange = updateDurationOptions;
    durationEl.onchange = () => {
      updatePerks();
      updatePrice();
      handleQtyVisibility();
    };
    qtyInput.oninput = updatePrice;

    window.onload = updateDurationOptions;

    document.getElementById('customerForm').onsubmit = async (e) => {
      e.preventDefault();
      const formData = new FormData(e.target);
      const data = Object.fromEntries(formData.entries());

      try {
        const res = await fetch('https://script.google.com/macros/s/YOUR_WEB_APP_ID/exec', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(data)
        });
        alert("‚úÖ Submitted! Check your email for payment details.");
        e.target.reset();
        updateDurationOptions();
      } catch {
        alert("‚ùå Something went wrong. Please try again later.");
      }
    };
  </script>
</body>
</html>
